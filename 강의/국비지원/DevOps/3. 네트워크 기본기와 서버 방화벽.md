### IP, Packet, Port

![[Pasted image 20231125170418.png]]
A와 B 지점이 있다. 
데이터를 전송한다고 가정했을 때 다이렉트로 전류를 흘려보내는 것이 가장 효율적이다.
이진수를 흘려 보낸다.

상대방이 많아지면 선이 늘어난다. 
이를 서킷 스위칭 방식이라고 부른다.
하지만 선이 늘어나면 단점이 발생한다.
비용이 많이 발생한다.

![[Pasted image 20231125170747.png]]
이를 해결하기 위해 패킷 스위칭 방식을 고안했다.
A가 B, C, D와 통신을 한다고 가정하자.
목적지까지 데이터를 전송하지 않고 중간에 매개하는 지점에 데이터를 보낸다. 
데이터를 전송하는 K와 F도 있다고 가정하면 이들도 그 지점에 데이터를 전송한다.
그 후 도착하기 전에 또 하나의 중간 지점이 있다.
그리고 나서 도착지에 전송된다. 

A가 '가나'라는 데이터를 K가 '다라'라는 데이터를 F가 '마바'라는 데이터를 전송한다고 가정하자.
A, F, K는 이 데이터를 쪼갠다. 따라서 가, 다, 마 데이터가 먼저 전송된다. 
그리고 나, 라, 바 데이터가 전송된다. 
첫 번째 중간지점에서는 데이터와 함께 목적지 정보를 저장한다. 
그러한 중간지점을 라우터라고 한다. 
라우터는 데이터를 받아서 패킷 포워딩을 한다. 

B가 데이터를 받으면 재조립을 한다.
처음에 데이터가 전송될 때(예를 들어 A의 가나) 가 정보에는 목적지인 B와, 
가의 출신지인 A가 저장되어 있다. 뿐만 아니라 순서도 숫자로 저장되어 있다.
이러한 정보를 헤더라고 한다. 
헤더의 정보를 바탕으로 재조립을 한다. 

패킷 스위칭은 선이 늘어날 필요가 없어 비용이 적게든다.
패킷으로 쪼개서 보내지 않는다면?
A, B, C를 보낼 때 A의 용량이 1GB이고 나머지가 가벼운 데이터라고 가정하자.
B, C는 작은 용량이기 때문에 전송시간이 짧은대도 불구하고 A가 다 전송될 때까지 wait가 걸린다. 
패킷 방식은 동시전송이며 동시전송은 패킷 분할과 재조립이 따른다.

![[Pasted image 20231128130536.png]]
전세계 엄청나게 많은 컴퓨터가 있다. 
각 자의 주소가 A, B, C 이런식으로 되어있으면 이들을 구분하기가 힘들다.
이들에게는 유일한 값이 필요한데 이 값을 정수 값으로 나타낸다.
0 ~ 42억 9천까지의 수로 구분하여 전세계에는 42억 9천 이하의 컴퓨터가 있다고 가정하고,
번호를 매긴다. 이를 IPv4 방식이라고 한다. 지금은 컴퓨터 수가 많이 늘어났기 때문에
IPv6를 도입했다. 

주소 한 칸 당 2^8의 정수를 가질 수 있고 이는 255다.
따라서 IPv4의 범위는 0.0.0.0 ~ 255.255.255.255가 된다. 
IPv6 전 IPv5도 있었다. 홀수는 테스트다. 
위에 나오는 목적지는 사실 B, C, D가 아니고 공인 IP 주소다. 

라우터는 어느 라우터로 이동해야할 지 데이터에게 알려준다.
이를 포워딩이라고 한다. 

예를 들어 롤 게임에서 '안녕'이라는 채팅을 보낸다고 가정하자.
하지만 컴퓨터에는 다양한 프로그램이 켜져있다.
카카오톡, 롤, 네이트온 등 다양한 통신 프로그램.
이 '안녕'이라는 데이터를 어느 프로그램에 보내야할지 모른다.
따라서 데이터를 보낼 때 하나의 정보가 더 필요하다. 포트번호이다. 
포트번호 역시 임의의 정수값이다. 
목적지에 도달해서 어느 프로그램을 선택할지를 정한다.
포트번호는 2Byte개씩 가질 수 있다. 2^16. 최대 65536.

정리하자면 A와 B가 통신을 하는데 패킷 스위칭 방식을 사용한다.
서킷 스위칭 방식은 매번 선이 늘어나 비용이 증가한다.
패킷 스위칭 방식에는 선이 하나이기 때문에 여러 명이 동시에 데이터를 보낸다.
따라서 중간에 여러 명의 데이터를 받는 라우터가 존재한다.
하지만 데이터가 방대해질 수록 데이터를 전송하는데 다른 데이터들이 기다려야 하기 때문에 
데이터를 패킷으로 분해한다. 
패킷은 그냥 전송할 수 없고 헤더가 반드시 필요하다.
헤더에는 데이터를 설명하는 데이터인 메타 데이터가 있다. 
또한 목적지에 도달 후 어느 프로그램에 도달해야할 지 알아야 하기 때문에 포트번호도 필요하다. 최종 목적지에 도달하기 위해서는 IP 주소가 필요하다. 

### EC2 서버

AWS에는 다양한 리전이 있다.
우리가 한 것은 서울 리전에 있는 수많은 컴퓨터 중 한 대를 임대한 것이다. 사실 가상화 기술 때문에 한 대를 여러 명이 사용하는 것이긴 하다.
임대한 컴퓨터에는 우분투라는 운영체제를 선택하여 설치한 것.
임대를 했으니 로컬 컴퓨터에서 클라우드 컴퓨터로 원격접속을 해야 한다. 

하지만 클라우드 컴퓨터는 방화벽을 두르고 있다. 
외부에서 접속할 때 IP 주소와 포트번호가 필요하다.
방화벽은 모든 포트를 차단한다. 
이 차단을 풀려면 인바운드 규칙 설정을 해야한다.
인바운드 규칙에 22번 포트를 개방하여 22번만 열어둘 수 있다.

22번 포트는 SSH 용도이다. SSH는 secure shell이다.
임베디드 개발자가 아닌 이상 소프트웨어 개발자는 CPU나 RAM같은 하드웨어를 제어하는 것이 매우 어렵다. 직접적으로 제어하지 않는다는 의미다.
따라서 OS의 도움이 필요하다. 
사람이 OS에 명령을 내리고 OS가 하드웨어를 제어한다. OS에게 명령을 내릴 때 사용하는 명령어 처리 프로그램이 shell이다.

22번 포트로 접속하면 클라우드 컴퓨터에게 원격으로 셸 명령어가 가능해진다. 이를 GUI 환경이 아닌 CLI 환경이라고 한다. 